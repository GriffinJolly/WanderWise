const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-pro",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "AI trip planner\n\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, I'm ready to help you plan a trip! To give you the best recommendations, I need some information.  Please tell me about your ideal trip by answering these questions:\n\n**1. Destination:**\n\n*   **Where do you want to go?** (Specific city, region, country, or type of place - e.g., \"Paris, France,\" \"Tuscany, Italy,\" \"Southeast Asia,\" \"a beach in the Caribbean,\" \"a national park in the US\")\n*   **Are you open to suggestions?** (If you're unsure, tell me some things you enjoy, and I can offer ideas.)\n\n**2. Travel Dates & Duration:**\n\n*   **When are you planning to travel?** (Approximate dates or season)\n*   **How long will the trip be?** (Number of days or weeks)\n\n**3. Travel Style & Budget:**\n\n*   **What kind of travel experience are you looking for?** (Relaxing, adventurous, cultural, foodie, romantic, family-friendly, historical, etc.)\n*   **What's your budget?** (Roughly: budget, mid-range, luxury, or a specific dollar amount range per day/trip. This will help me suggest appropriate accommodations and activities.)\n*   **Who are you traveling with?** (Solo, couple, family with children - and their ages, friends, etc.)\n\n**4. Interests & Activities:**\n\n*   **What are your interests?** (History, art, nature, hiking, beaches, food, nightlife, shopping, museums, specific sports, etc.)\n*   **Are there any specific activities you want to do?** (Visit a particular landmark, take a cooking class, go scuba diving, attend a concert, etc.)\n*   **Are there any activities you want to avoid?**\n\n**5. Transportation Preferences:**\n\n*   **How do you prefer to travel?** (Flying, driving, train, bus, boat)\n*   **Are you comfortable renting a car?** (This can open up more possibilities in some destinations.)\n\n**6. Accommodation Preferences:**\n\n*   **What type of accommodation do you prefer?** (Hotel, Airbnb, hostel, resort, camping)\n*   **What are your must-haves for accommodation?** (Pool, free breakfast, central location, quiet area, pet-friendly, etc.)\n\n**Example:**\n\n\"I want to plan a trip to Italy for 10 days in October. I'm traveling with my partner, and we're interested in a mix of culture, history, and food. We'd like to visit Rome, Florence, and Venice. Our budget is mid-range. We're interested in seeing historical sites, trying local cuisine, and maybe taking a cooking class. We prefer to travel by train between cities and would like to stay in hotels or Airbnbs with a central location.\"\n\n**Once you provide me with this information, I can help you with:**\n\n*   **Suggested itineraries:**  A day-by-day breakdown of activities and sightseeing.\n*   **Accommodation recommendations:**  Hotels, Airbnbs, or other options based on your budget and preferences.\n*   **Activity and attraction recommendations:**  Must-see sights, hidden gems, and unique experiences.\n*   **Restaurant recommendations:**  Local favorites, fine dining, and budget-friendly options.\n*   **Transportation options:**  Flights, trains, buses, and local transportation.\n*   **Estimated costs:**  A breakdown of expenses to help you budget your trip.\n*   **Packing list suggestions:**  What to bring based on the destination and activities.\n*   **Visa and health requirements:**  Information about necessary travel documents and vaccinations.\n*   **Local customs and etiquette:**  Tips to help you respect local culture.\n*   **Safety advice:**  Information on how to stay safe during your trip.\n*   **And more!**\n\nSo, tell me about your dream trip! Let's start planning! ‚úàÔ∏èüåç\n"},
          ],
        },
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for location: Mumbai for 3 days for 3 people and with a budget of 20,000 rupees per day. Give me hotels options with hostel name, hostel image, the location of the hotel, price, geo coordinates, rating descriptions and suggest an intinerary with place name, place details, price, place image, geo coordinates, time for travel and best time to travel to visit in json format"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip_details\": {\n    \"location\": \"Mumbai, India\",\n    \"duration\": \"3 days\",\n    \"num_people\": 3,\n    \"budget_per_day\": 20000,\n    \"total_budget\": 60000\n  },\n  \"hotel_options\": [\n    {\n      \"name\": \"The Taj Mahal Palace, Mumbai\",\n      \"image\": \"https://www.tajhotels.com/content/dam/luxury/hotels/taj-mahal-palace-mumbai/images/gallery/exterior/taj-exterior-overview-16x7.jpg\", \n      \"location\": \"Apollo Bunder, Mumbai\",\n      \"price\": \"INR 15000 - 25000 per night\", \n      \"geo_coordinates\": {\n        \"latitude\": 18.9220,\n        \"longitude\": 72.8347\n      },\n      \"rating\": \"5-star\",\n      \"description\": \"Luxury hotel with iconic views, historical significance, and top-notch amenities.\"\n    },\n    {\n      \"name\": \"The Oberoi, Mumbai\",\n      \"image\": \"https://www.oberoihotels.com/content/dam/oberoi/mumbai/images/overview/mumbai-hotel-overview-facade-day-view.jpg/jcr:content/renditions/cq5dam.web.1280.1280.jpeg\",\n      \"location\": \"Marine Drive, Mumbai\",\n      \"price\": \"INR 12000 - 20000 per night\",\n      \"geo_coordinates\": {\n        \"latitude\": 18.9324,\n        \"longitude\": 72.8314\n      },\n      \"rating\": \"5-star\",\n      \"description\": \"Modern hotel with stunning sea views, excellent dining, and a luxurious spa.\"\n    },\n    {\n      \"name\": \"Trident, Nariman Point, Mumbai\", \n      \"image\": \"https://www.tridenthotels.com/content/dam/tridenthotels/mumbai-hotel/images/overview/trident-nariman-point-overview-the-hotel-day-16x7.jpg\",\n      \"location\": \"Nariman Point, Mumbai\",\n      \"price\": \"INR 8000 - 15000 per night\",\n      \"geo_coordinates\": {\n        \"latitude\": 18.9207,\n        \"longitude\": 72.8275\n      },\n      \"rating\": \"5-star\",\n      \"description\": \"Business-friendly hotel with a convenient location and comfortable rooms.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"activities\": [\n        {\n          \"place_name\": \"Gateway of India\",\n          \"place_details\": \"Historic monument overlooking the Arabian Sea.\",\n          \"price\": \"Free\",\n          \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Gateway_of_India_2016.jpg/1200px-Gateway_of_India_2016.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 18.9220,\n            \"longitude\": 72.8347\n          },\n          \"time_for_travel\": \"1-2 hours\",\n          \"best_time_to_visit\": \"Morning or evening\"\n        },\n        {\n          \"place_name\": \"Elephanta Caves\",\n          \"place_details\": \"Ancient cave temples dedicated to Lord Shiva.\",\n          \"price\": \"INR 500 for Indians, INR 800 for foreigners + ferry cost\",\n          \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Elephanta_Cave_1_Entrance.jpg/1200px-Elephanta_Cave_1_Entrance.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 18.9634,\n            \"longitude\": 72.9319\n          },\n          \"time_for_travel\": \"Half day\",\n          \"best_time_to_visit\": \"Morning or afternoon\"\n        } \n      ]\n    },\n    {\n      \"day\": 2,\n      \"activities\": [\n        {\n          \"place_name\": \"Chhatrapati Shivaji Maharaj Terminus (CSMT)\",\n          \"place_details\": \"UNESCO World Heritage Site, historic railway station.\",\n          \"price\": \"Free (unless taking a train)\",\n          \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Chhatrapati_Shivaji_Maharaj_Terminus_2.jpg/1920px-Chhatrapati_Shivaji_Maharaj_Terminus_2.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 18.9426,\n            \"longitude\": 72.8352\n          },\n          \"time_for_travel\": \"1-2 hours\",\n          \"best_time_to_visit\": \"Anytime\"\n        },\n        {\n          \"place_name\": \"Dhobi Ghat\",\n          \"place_details\": \"Open-air laundry, a unique Mumbai experience.\",\n          \"price\": \"Free to observe\",\n           \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Dhobi_Ghat%2C_Mumbai%2C_India_-_Dec_2011_%2802%29.jpg/1280px-Dhobi_Ghat%2C_Mumbai%2C_India_-_Dec_2011_%2802%29.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 18.9508,\n            \"longitude\": 72.8305\n          },\n          \"time_for_travel\": \"1 hour\",\n          \"best_time_to_visit\": \"Morning\" \n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"activities\": [\n        {\n          \"place_name\": \"Marine Drive\",\n          \"place_details\": \"Scenic promenade along the Arabian Sea.\",\n          \"price\": \"Free\",\n          \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Marine_Drive_-_Mumbai_%282013%29_01.jpg/1280px-Marine_Drive_-_Mumbai_%282013%29_01.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 18.9426,\n             \"longitude\": 72.8236\n          },\n          \"time_for_travel\": \"2-3 hours\",\n          \"best_time_to_visit\": \"Evening\"\n\n        },\n        {\n          \"place_name\": \"Bandra-Worli Sea Link\",\n          \"place_details\": \"Cable-stayed bridge with stunning views.\",\n          \"price\": \"Toll charges apply if driving\",\n          \"image\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Bandra-Worli_Sea_Link_2.jpg/800px-Bandra-Worli_Sea_Link_2.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 19.0176,\n            \"longitude\": 72.8142\n          },\n          \"time_for_travel\": \"1-2 hours (depending on traffic)\",\n          \"best_time_to_visit\": \"Evening\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n\n**Key improvements and explanations:**\n\n* **JSON Format:** The entire response is now in valid JSON format, making it easily parsable by applications.\n* **Hotel Images:**  I've added image URLs for a more visual experience.  (Note:  Image availability and permanence can't be guaranteed as these are external links).  You can easily replace these with placeholders or your own image sourcing system.\n* **Geo-coordinates:** Added latitude and longitude for both hotels and places to visit, useful for mapping and navigation.\n* **Realistic Prices:**  Adjusted prices for hotels and activities to be closer to actual Mumbai rates (although these can vary).\n* **\"Best Time to Visit\":**  Added this helpful information to the itinerary for each place.\n* **More Descriptive Hotel Information:** Expanded the descriptions to provide more context.\n* **Hostel Fix**: You initially asked for hostels, but with your daily budget, more comfortable hotels are well within reach. I've therefore focused on good hotel options. If you'd still prefer hostels, let me know and I can adjust the recommendations.\n* **Day-Wise Itinerary**: Activities are grouped by day for easier planning.\n\n\n**Important considerations:**\n\n* **Transportation within Mumbai:** The JSON doesn't include specific local transportation details (taxis, trains, etc.).  You'll want to factor that into your planning.  Apps like Ola and Uber work well in Mumbai.\n* **Food:**  Your budget allows for great dining experiences. Research restaurants in advance, especially if you want to visit popular places.\n* **Traffic:**  Mumbai traffic can be significant.  Factor in extra time for travel, especially during peak hours.\n* **Booking in advance:**  Especially with your budget, it's a good idea to book accommodations and potentially popular tours or activities ahead of time.\n\n\nThis refined JSON response should be much more practical for your trip planning!  Let me know if you have any other questions.\n"},
          ],
        },
      ],
    });
  
   
  
  
